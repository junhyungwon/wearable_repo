(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{302:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(101);var n=r(24);function o(e){if("object"===Object(n.a)(e.data)){if(void 0!==e.data["return value"]){if(0==e.data["return value"]||1==e.data["return value"])return e.data;throw e.data["return value"]}return e.data}var t=e.data.match(/\-\d+/m);if(!t)throw"unknown";if(t.length<1)throw"unknown";throw t[0]}},303:function(e,t,r){"use strict";r(1);t.a={methods:{alert:function(e){var t=this;return new Promise((function(r,n){t.$modal.show("dialog",{text:e,buttons:[{title:t.$polyglot.t("dialog.ok"),handler:function(){r(!0)}}]})}))},confirm:function(e){var t=this;return new Promise((function(r,n){t.$modal.show("dialog",{text:e,buttons:[{title:t.$polyglot.t("dialog.cancel"),handler:function(){r(!1)}},{title:t.$polyglot.t("dialog.ok"),default:!0,handler:function(){r(!0)}}]})}))}}}},305:function(e,t,r){var content=r(308);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(79).default)("e8eb5854",content,!0,{sourceMap:!1})},306:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(24);function o(e,t){for(var r in e)void 0!==t[r]&&(Array.isArray(t[r])?e[r]=t[r].map((function(e){return e})):("object"===Object(n.a)(t[r])&&t[r]&&o(e[r],t[r]),e[r]=isNaN(t[r])?t[r]:parseInt(t[r],10)))}},307:function(e,t,r){"use strict";r(305)},308:function(e,t,r){(t=r(78)(!1)).push([e.i,"label[data-v-9e138a9e]{display:flex;width:100%;align-items:center}label input[type=checkbox][data-v-9e138a9e]{display:none}label img[data-v-9e138a9e]{display:block;flex-basis:24px;flex-shrink:0;flex-grow:0;width:24px;height:24px}label:hover img.unchecked[data-v-9e138a9e],label img.hover[data-v-9e138a9e]{display:none}label:hover img.hover[data-v-9e138a9e]{display:block}label span[data-v-9e138a9e]{flex-grow:1;padding-left:14px;font-size:14px;font-weight:400;letter-spacing:.26px;color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""]),e.exports=t},309:function(e,t,r){"use strict";var n={props:["checked"],computed:{state:{get:function(){return!0===this.checked||!1!==this.checked&&(isNaN(this.checked)?!!this.checked:!!parseInt(this.checked,10))},set:function(e){this.$emit("updated",e)}}}},o=(r(307),r(33)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.state)?e._i(e.state,null)>-1:e.state},on:{change:function(t){var r=e.state,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&(e.state=r.concat([null])):c>-1&&(e.state=r.slice(0,c).concat(r.slice(c+1)))}else e.state=o}}}),e._v(" "),e.state?r("img",{staticClass:"checked",attrs:{src:"/images/components/input-checkbox/filled.svg",alt:"Checked"}}):[r("img",{staticClass:"unchecked",attrs:{src:"/images/components/input-checkbox/outline.svg",alt:"Unchecked"}}),e._v(" "),r("img",{staticClass:"hover",attrs:{src:"/images/components/input-checkbox/hover.svg",alt:"Active"}})],e._v(" "),e._t("default")],2)}),[],!1,null,"9e138a9e",null);t.a=component.exports},316:function(e,t){},331:function(e,t,r){var content=r(373);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(79).default)("088c8efe",content,!0,{sourceMap:!1})},372:function(e,t,r){"use strict";r(331)},373:function(e,t,r){(t=r(78)(!1)).push([e.i,"h2.checkbox-flex[data-v-47aaacb8]{display:flex;align-items:center}h2.checkbox-flex>label[data-v-47aaacb8]{margin:0 10px 0 0;flex-basis:24px}",""]),e.exports=t},385:function(e,t,r){"use strict";r.r(t);r(51),r(2),r(37),r(41),r(16),r(3);var n=r(29),o=(r(50),r(10)),c=(r(20),r(21),r(1),r(315)),l=r.n(c),f=r(309),d=r(302),m=r(306),dialog=r(303);function _(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var w,h,x=/^([0-9]|[a-z]|[A-Z]|_|\-|!|@|#|\$|%|\^){1,31}$/,y=/^.*(?=^.{9,32}$)(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^+=]).*$/,$={components:{"input-checkbox":f.a},mixins:[dialog.a],data:function(){return{form:{model:null,current_pw:null,new_pw:null,confirm_pw:null,aes_encryption:null,aes_key:null,aes_iv:null,live_stream_account:{enable:null,enctype:null,id:null,pw:null},onvif:{id:null,pw:null}},disableSubmit:!1,updatePassword:!1,users:[{idx:1,name:"admin",level:0,fixed:!0},{idx:2,name:"operator",level:1,fixed:!1},{idx:3,name:"viewer",level:2,fixed:!1}]}},watch:{"form.model":function(e){"NEXXONE"===this.form.model?window.document.title="NEXX ONE":window.document.title=e},"form.aes_encryption":function(e){}},methods:{wait:function(){return new Promise((function(e){return setTimeout(e,1e3)}))},aesEncrypt:function(e){return l.a.AES.encrypt(e,l.a.enc.Utf8.parse(w),{iv:l.a.enc.Utf8.parse(h),padding:l.a.pad.Pkcs7,mode:l.a.mode.CBC}).toString()},aesDecrypt:function(e){var t=l.a.AES.decrypt(e,l.a.enc.Utf8.parse(w),{iv:l.a.enc.Utf8.parse(h),padding:l.a.pad.Pkcs7,mode:l.a.mode.CBC});return l.a.enc.Utf8.stringify(t).toString()},fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,data,o,c,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$apiRouter.resolve({name:"cgi/config",query:{action:"search",param:"user_config"}}).href,t.prev=1,t.next=4,e.$axios.get(r);case 4:return n=t.sent,data=Object(d.a)(n),Object(m.a)(e.form,data),o=e.form.aes_encryption,console.log("decryption user vue aes_encryption ="+o),w=e.form.aes_key,console.log("decryption user vue aes_key ="+w),h=e.form.aes_iv,console.log("decryption user vue aes_key ="+h),c=e.form.onvif.pw,e.form.onvif.pw=e.aesDecrypt(c),console.log("decryption onvif pw ="+e.form.onvif.pw),l=e.form.live_stream_account.id,e.form.live_stream_account.id=e.aesDecrypt(l),console.log("decryption rtsp id ="+e.form.live_stream_account.id),f=e.form.live_stream_account.pw,e.form.live_stream_account.pw=e.aesDecrypt(f),console.log("decryption rtsp pw ="+e.form.live_stream_account.pw),t.next=24,e.wait();case 24:e.disableSubmit=!1,window.$nuxt.$nextTick((function(){window.$nuxt.$emit("x-userFetched",data)})),t.next=40;break;case 28:if(t.prev=28,t.t0=t.catch(1),!e.$polyglot.has("error_messages."+t.t0)){t.next=36;break}return t.next=33,e.alert(e.$polyglot.t("error_messages."+t.t0));case 33:e.$modal.hide("dialog"),t.next=39;break;case 36:return t.next=38,e.alert(t.t0);case 38:e.$modal.hide("dialog");case 39:console.error(t.t0);case 40:case"end":return t.stop()}}),t,null,[[1,28]])})))()},storeData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,form,o,c,l,f,m,v,w,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validation();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return e.disableSubmit=!0,r=e.$apiRouter.resolve({name:"cgi/user"}).href,(form=new URLSearchParams).append("chk_change_web_passwd",e.updatePassword?"1":"0"),1==e.updatePassword&&(o=e.form.current_pw,c=e.form.new_pw,l=e.form.confirm_pw,e.form.current_pw=e.aesEncrypt(o),e.form.new_pw=e.aesEncrypt(c),e.form.confirm_pw=e.aesEncrypt(l),console.log("WEB cur_pw ="+o),console.log("WEB new_pw ="+c),console.log("WEB confirm_pw ="+l),console.log("WEB encoded cur_pw ="+e.form.current_pw),console.log("WEB encoded new_pw ="+e.form.new_pw),console.log("WEB encoded confirm_pw ="+e.form.confirm_pw),form.append("txt_cur_pw",e.form.current_pw),form.append("txt_new_pw1",e.form.new_pw),form.append("txt_new_pw2",e.form.confirm_pw)),f=e.form.onvif.pw,e.form.onvif.pw=e.aesEncrypt(f),console.log("onvif pw ="+f),console.log("onvif aes enc pw  ="+e.form.onvif.pw),form.append("txt_onvif_id",e.form.onvif.id),form.append("txt_onvif_pw",e.form.onvif.pw),m=e.form.live_stream_account.id,v=e.form.live_stream_account.pw,e.form.live_stream_account.id=e.aesEncrypt(m),e.form.live_stream_account.pw=e.aesEncrypt(v),"FITT360 Security"==e.form.model&&form.append("live_stream_account_enable",e.form.live_stream_account.enable?"1":"0"),e.form.live_stream_account.enctype=0,form.append("cbo_live_stream_account_enc_type",e.form.live_stream_account.enctype),form.append("txt_live_stream_account_id",e.form.live_stream_account.id),form.append("txt_live_stream_account_pw",e.form.live_stream_account.pw),t.prev=24,t.next=27,e.$axios.post(r,form);case 27:return w=t.sent,Object(d.a)(w),console.log(w),h=function(e){var t,r={},o=_(e);try{for(o.s();!(t=o.n()).done;){var c=t.value,l=Object(n.a)(c,2),f=l[0],d=l[1];r[f]=d}}catch(e){o.e(e)}finally{o.f()}return r},window.$nuxt.$nextTick((function(){window.$nuxt.$emit("x-userSaved",h(form.entries()))})),t.next=34,e.alert(e.$polyglot.t("messages.saved"));case 34:e.$modal.hide("dialog"),e.$router.push("/"),t.next=51;break;case 38:if(t.prev=38,t.t0=t.catch(24),console.log(t.t0),!e.$polyglot.has("error_messages."+t.t0)){t.next=47;break}return t.next=44,e.alert(e.$polyglot.t("error_messages."+t.t0));case 44:e.$modal.hide("dialog"),t.next=50;break;case 47:return t.next=49,e.alert(t.t0);case 49:e.$modal.hide("dialog");case 50:console.error(t.t0);case 51:return t.prev=51,e.disableSubmit=!1,t.finish(51);case 54:case"end":return t.stop()}}),t,null,[[24,38,51,54]])})))()},validation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.updatePassword){t.next=13;break}if(e.form.current_pw){t.next=7;break}return t.next=4,e.alert(e.$polyglot.t("user.password.messages.current_pw.null"));case 4:return e.$modal.hide("dialog"),e.$refs.current_pw.focus(),t.abrupt("return",!1);case 7:if(y.test(e.form.current_pw)){t.next=13;break}return t.next=10,e.alert(e.$polyglot.t("user.password.messages.current_pw.format"));case 10:return e.$modal.hide("dialog"),e.$refs.current_pw.focus(),t.abrupt("return",!1);case 13:if(!e.updatePassword){t.next=32;break}if(e.form.new_pw){t.next=20;break}return t.next=17,e.alert(e.$polyglot.t("user.password.messages.new_pw.null"));case 17:return e.$modal.hide("dialog"),e.$refs.new_pw.focus(),t.abrupt("return",!1);case 20:if("admin"!==e.form.new_pw){t.next=26;break}return t.next=23,e.alert(e.$polyglot.t("user.password.messages.new_pw.admin"));case 23:return e.$modal.hide("dialog"),e.$refs.new_pw.focus(),t.abrupt("return",!1);case 26:if(y.test(e.form.new_pw)){t.next=32;break}return t.next=29,e.alert(e.$polyglot.t("user.password.messages.new_pw.format"));case 29:return e.$modal.hide("dialog"),e.$refs.new_pw.focus(),t.abrupt("return",!1);case 32:if(!e.updatePassword){t.next=45;break}if(e.form.confirm_pw===e.form.new_pw){t.next=39;break}return t.next=36,e.alert(e.$polyglot.t("user.password.messages.confirm_pw.confirmation"));case 36:return e.$modal.hide("dialog"),e.$refs.confirm_pw.focus(),t.abrupt("return",!1);case 39:if(y.test(e.form.confirm_pw)){t.next=45;break}return t.next=42,e.alert(e.$polyglot.t("user.password.messages.confirm_pw.format"));case 42:return e.$modal.hide("dialog"),e.$refs.confirm_pw.focus(),t.abrupt("return",!1);case 45:if(e.form.onvif.pw){t.next=51;break}return t.next=48,e.alert(e.$polyglot.t("user.onvif.messages.pw.null"));case 48:return e.$modal.hide("dialog"),e.$refs.onvif_pw.focus(),t.abrupt("return",!1);case 51:if(y.test(e.form.onvif.pw)){t.next=57;break}return t.next=54,e.alert(e.$polyglot.t("user.onvif.messages.pw.format"));case 54:return e.$modal.hide("dialog"),e.$refs.onvif_pw.focus(),t.abrupt("return",!1);case 57:if(!("NEXX360"==e.form.model||"NEXXONE"==e.form.model||"NEXX360B"==e.form.model||"NEXX360C"==e.form.model||"NEXX360W_CCTV"==e.form.model||"NEXX360W"==e.form.model||"NEXXB"==e.form.model||"NEXX360M"==e.form.model||"NEXX360W_MUX"==e.form.model||"NEXXB_ONE"==e.form.model||"FITT360 Security"==e.form.model&&e.form.live_stream_account.enable)){t.next=82;break}if(e.form.live_stream_account.id){t.next=64;break}return t.next=61,e.alert(e.$polyglot.t("user.live_stream_account.messages.id.null"));case 61:return e.$modal.hide("dialog"),e.$refs.live_stream_account_id.focus(),t.abrupt("return",!1);case 64:if(x.test(e.form.live_stream_account.id)){t.next=70;break}return t.next=67,e.alert(e.$polyglot.t("user.live_stream_account.messages.id.format"));case 67:return e.$modal.hide("dialog"),e.$refs.live_stream_account_id.focus(),t.abrupt("return",!1);case 70:if(e.form.live_stream_account.pw){t.next=76;break}return t.next=73,e.alert(e.$polyglot.t("user.live_stream_account.messages.pw.null"));case 73:return e.$modal.hide("dialog"),e.$refs.live_stream_account_pw.focus(),t.abrupt("return",!1);case 76:if(y.test(e.form.live_stream_account.pw)){t.next=82;break}return t.next=79,e.alert(e.$polyglot.t("user.live_stream_account.messages.pw.format"));case 79:return e.$modal.hide("dialog"),e.$refs.live_stream_account_pw.focus(),t.abrupt("return",!1);case 82:return t.abrupt("return",!0);case 83:case"end":return t.stop()}}),t)})))()}},created:function(){},mounted:function(){this.fetchData(),this.$refs.current_pw.focus()}},k=(r(372),r(33)),component=Object(k.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-page"},[r("header",{staticClass:"page-header"},[r("h1",[e._v(e._s(e.$polyglot.t("user.page_title")))])]),e._v(" "),r("main",{staticClass:"page-body"},[r("section",[r("h2",{staticClass:"checkbox-flex"},[r("input-checkbox",{attrs:{checked:e.updatePassword},on:{updated:function(t){e.updatePassword=t}}}),e._v(" "),r("span",[e._v("\n\t\t\t\t\t"+e._s(e.$polyglot.t("user.password.name"))+"\n\t\t\t\t")])],1),e._v(" "),r("ol",{staticClass:"controls"},[r("li",[r("label",{attrs:{for:"currentPswd"}},[e._v(e._s(e.$polyglot.t("user.password.fields.current_pw")))]),e._v(" "),r("input",{ref:"current_pw",staticClass:"form-control",attrs:{type:"password",id:"currentPswd",maxlength:"31",placeholder:"",disabled:!e.updatePassword},domProps:{value:e.form.current_pw},on:{input:function(t){e.form.current_pw=t.target.value}}})]),e._v(" "),r("li",[r("label",{attrs:{for:"newPswd"}},[e._v(e._s(e.$polyglot.t("user.password.fields.new_pw")))]),e._v(" "),r("input",{ref:"new_pw",staticClass:"form-control",attrs:{type:"password",id:"newPswd",maxlength:"31",placeholder:"",disabled:!e.updatePassword},domProps:{value:e.form.new_pw},on:{input:function(t){e.form.new_pw=t.target.value}}})]),e._v(" "),r("li",[r("label",{attrs:{for:"confirmPswd"}},[e._v(e._s(e.$polyglot.t("user.password.fields.confirm_pw")))]),e._v(" "),r("input",{ref:"confirm_pw",staticClass:"form-control",attrs:{type:"password",id:"confirmPswd",maxlength:"31",placeholder:"",disabled:!e.updatePassword},domProps:{value:e.form.confirm_pw},on:{input:function(t){e.form.confirm_pw=t.target.value}}})])])]),e._v(" "),r("section",[r("h2",[e._v(e._s(e.$polyglot.t("user.onvif.name")))]),e._v(" "),r("ol",{staticClass:"controls"},[r("li",[r("label",{attrs:{for:"onvifId"}},[e._v(e._s(e.$polyglot.t("user.onvif.fields.id")))]),e._v(" "),r("input",{ref:"onvif_id",staticClass:"form-control",attrs:{type:"text",id:"onvifId",disabled:"",maxlength:"31",placeholder:""},domProps:{value:e.form.onvif.id},on:{input:function(t){e.form.onvif.id=t.target.value}}})]),e._v(" "),r("li",[r("label",{attrs:{for:"onvifPw"}},[e._v(e._s(e.$polyglot.t("user.onvif.fields.pw")))]),e._v(" "),r("input",{ref:"onvif_pw",staticClass:"form-control",attrs:{type:"password",id:"onvifPw",maxlength:"16",placeholder:""},domProps:{value:e.form.onvif.pw},on:{input:function(t){e.form.onvif.pw=t.target.value}}})])])]),e._v(" "),r("section",[r("h2",[e._v(e._s(e.$polyglot.t("user.live_stream_account.name")))]),e._v(" "),r("ol",{staticClass:"controls"},["FITT360 Security"==e.form.model?r("li",[r("input-checkbox",{attrs:{checked:e.form.live_stream_account.enable},on:{updated:function(t){e.form.live_stream_account.enable=t}}},[r("span",[e._v(e._s(e.$polyglot.t("user.live_stream_account.fields.enable")))])])],1):e._e(),e._v(" "),r("li",[r("label",{attrs:{for:"liveStreamAccountId"}},[e._v(e._s(e.$polyglot.t("user.live_stream_account.fields.id")))]),e._v(" "),r("input",{ref:"live_stream_account_id",staticClass:"form-control",attrs:{type:"text",id:"liveStreamAccountId",disabled:!e.form.live_stream_account.enable,maxlength:"16",placeholder:""},domProps:{value:e.form.live_stream_account.id},on:{input:function(t){e.form.live_stream_account.id=t.target.value}}})]),e._v(" "),r("li",[r("label",{attrs:{for:"liveStreamAccountPw"}},[e._v(e._s(e.$polyglot.t("user.live_stream_account.fields.pw")))]),e._v(" "),r("input",{ref:"live_stream_account_pw",staticClass:"form-control",attrs:{type:"password",id:"liveStreamAccountPw",disabled:!e.form.live_stream_account.enable,maxlength:"16",placeholder:""},domProps:{value:e.form.live_stream_account.pw},on:{input:function(t){e.form.live_stream_account.pw=t.target.value}}})])])])]),e._v(" "),r("footer",{staticClass:"page-footer"},[r("div",{staticClass:"cancel-submit-buttons"},[r("nuxt-link",{staticClass:"cancel-btn",attrs:{to:"/"}},[e._v(e._s(e.$polyglot.t("buttons.cancel")))]),e._v(" "),r("button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:e.disableSubmit},on:{click:function(t){return t.preventDefault(),e.storeData(t)}}},[e._v("\n\t\t\t\t"+e._s(e.$polyglot.t("buttons.submit"))+"\n\t\t\t")])],1)])])}),[],!1,null,"47aaacb8",null);t.default=component.exports}}]);